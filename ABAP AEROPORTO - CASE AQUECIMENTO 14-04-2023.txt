REPORT ZSEXTOU16.
TABLES: ZAEROPORTO.

DATA: lW_LAYOUT TYPE SLIS_LAYOUT_ALV.

TYPES: BEGIN OF ty_VOO,
         MARK     TYPE FLAG,
         cod_aero TYPE C LENGTH 3,
         nome     TYPE C LENGTH 30,
       END OF ty_VOO.

DATA: t_voo TYPE TABLE OF ty_voo.



SELECTION-SCREEN: BEGIN OF BLOCK B1 WITH FRAME TITLE TEXT-001.
PARAMETERS: V_QUANT TYPE I.
SELECTION-SCREEN: END OF BLOCK B1.

SELECTION-SCREEN: BEGIN OF BLOCK B2 WITH FRAME TITLE TEXT-002.
PARAMETERS: V_MALAS TYPE I.
SELECTION-SCREEN: END OF BLOCK B2.
START-OF-SELECTION.

PERFORM F_SELECT.

PERFORM F_ALV_ORIGEM.
FORM f_select .
DATA: lwy_voo type ty_voo.

select COD_AERO
 from ZAEROPORTO
 INTO TABLE @DATA(Lt_CLIENTE).
IF SY-SUBRC IS INITIAL.

LOOP AT LT_CLIENTE INTO DATA(Lw_CLIENTE).
  MOVE LW_CLIENTE-mark to lwy_voo.
  MOVE Lw_CLIENTE-COD_AERO TO LWy_voo.


  APPEND LWY_VOO TO T_VOO.

ENDLOOP.

ENDIF.

ENDFORM.

FORM F_ALV_ORIGEM.

DATA: LT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.

lW_LAYOUT-ZEBRA = 'X'.
lW_LAYOUT-COLWIDTH_OPTIMIZE = 'X'.
lW_LAYOUT-BOX_FIELDNAME = 'MARK'.


CALL FUNCTION 'REUSE_ALV_FIELDCATALOG_MERGE'
 EXPORTING
    I_STRUCTURE_NAME             = 'ZORIGEM16'
  CHANGING
    ct_fieldcat                  = LT_FIELDCAT
 EXCEPTIONS
   INCONSISTENT_INTERFACE       = 1
   PROGRAM_ERROR                = 2
   OTHERS                       = 3
          .
IF sy-subrc <> 0.
* Implement suitable error handling here
ENDIF.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
 EXPORTING
    IS_LAYOUT                         = LW_LAYOUT
    I_CALLBACK_PROGRAM                = SY-CPROG
   I_CALLBACK_PF_STATUS_SET          = 'F_PF_STATUS_SET'
   I_CALLBACK_USER_COMMAND           = 'F_USER_COMMAND'
*   I_STRUCTURE_NAME                  = ZAEROPORTO

   IT_FIELDCAT                       = LT_FIELDCAT
  TABLES
    t_outtab                          = T_VOO


 EXCEPTIONS
   PROGRAM_ERROR                     = 1
   OTHERS                            = 2
          .
IF sy-subrc <> 0.
* Implement suitable error handling here
ENDIF.

ENDFORM.

FORM F_PF_STATUS_SET using LIST.

SET PF-STATUS 'STATUS_GUI'.
ENDFORM.


FORM F_USER_COMMAND USING UCOMM VARIABLE TYPE SLIS_SELFIELD.

ENDFORM.